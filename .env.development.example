# ============================================================================
# OpenClaw VPS - Development Environment Configuration
# ============================================================================
#
# 開発環境用の環境変数設定例
# このファイルをコピーして使用: cp .env.development.example .env
#
# 開発環境の特徴:
# - デバッグモード有効
# - ログ詳細レベル
# - ホットリロード有効
# - 開発ツール有効（Adminer, pgAdmin等）
#
# ============================================================================

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------

POSTGRES_USER=openclaw_dev
POSTGRES_PASSWORD=dev_password_123
POSTGRES_DB=openclaw_dev

# Development用の軽量設定
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=512MB
POSTGRES_WORK_MEM=4MB
POSTGRES_MAINTENANCE_WORK_MEM=128MB

# ----------------------------------------------------------------------------
# LLM Provider Configuration
# ----------------------------------------------------------------------------

# Anthropic Claude API（開発用APIキー）
ANTHROPIC_API_KEY=sk-ant-DEVELOPMENT_KEY_HERE

# Development Settings
ANTHROPIC_MODEL=claude-haiku-4-5-20250514  # 開発ではHaikuを使用（コスト削減）
ANTHROPIC_MAX_TOKENS=2048
ANTHROPIC_TEMPERATURE=0.7

# 開発環境のレート制限（緩め）
ANTHROPIC_REQUESTS_PER_MINUTE=100
ANTHROPIC_TOKENS_PER_DAY=10000000  # 制限を緩く

# ----------------------------------------------------------------------------
# OpenClaw Configuration
# ----------------------------------------------------------------------------

# Application Settings
NODE_ENV=development
PORT=3000
LOG_LEVEL=debug  # 詳細ログ

# Session & Security（開発用の簡易設定）
SESSION_SECRET=dev_session_secret_not_for_production
JWT_SECRET=dev_jwt_secret_not_for_production
JWT_EXPIRES_IN=7d  # 開発では長めに

# CORS Settings（開発では緩く）
CORS_ORIGIN=*
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:5678

# Hot Reload
WATCH=true
NODEMON_DELAY=2000

# ----------------------------------------------------------------------------
# Telegram Bot Configuration
# ----------------------------------------------------------------------------

# Telegram Bot Token（開発用ボット）
TELEGRAM_BOT_TOKEN=1234567890:DEV_BOT_TOKEN_HERE

# Telegram Chat ID
TELEGRAM_CHAT_ID=123456789

# Development Settings
TELEGRAM_PARSE_MODE=Markdown
TELEGRAM_DISABLE_NOTIFICATION=true  # 開発では通知オフ推奨

# ----------------------------------------------------------------------------
# N8N Configuration
# ----------------------------------------------------------------------------

# N8N Basic Settings（ローカル）
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_EDITOR_BASE_URL=http://localhost:5678

# N8N Security（開発では簡易化）
N8N_BASIC_AUTH_ACTIVE=false  # 開発では認証オフでOK
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=admin123

# N8N Encryption Key
N8N_ENCRYPTION_KEY=dev_encryption_key_32_characters_min

# N8N Execution Settings
EXECUTIONS_PROCESS=main
EXECUTIONS_MODE=regular
EXECUTIONS_TIMEOUT=300
EXECUTIONS_TIMEOUT_MAX=3600

# N8N Data Retention（開発では全保存）
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true
EXECUTIONS_DATA_PRUNE=false  # 開発では削除しない
EXECUTIONS_DATA_MAX_AGE=168  # 7 days

# N8N Timezone
GENERIC_TIMEZONE=Asia/Tokyo
TZ=Asia/Tokyo

# ----------------------------------------------------------------------------
# OpenNotebook Configuration
# ----------------------------------------------------------------------------

OPENNOTEBOOK_PORT=8080
OPENNOTEBOOK_HOST=0.0.0.0

# OpenNotebook Database
OPENNOTEBOOK_DB_HOST=postgres
OPENNOTEBOOK_DB_PORT=5432
OPENNOTEBOOK_DB_NAME=opennotebook_dev
OPENNOTEBOOK_DB_USER=openclaw_dev
OPENNOTEBOOK_DB_PASSWORD=dev_password_123

# OpenNotebook Storage
OPENNOTEBOOK_UPLOAD_DIR=/app/uploads
OPENNOTEBOOK_MAX_FILE_SIZE=100MB  # 開発では大きめに

# ----------------------------------------------------------------------------
# Nginx Configuration
# ----------------------------------------------------------------------------

# Development - localhost
DOMAIN_NAME=localhost
WWW_DOMAIN=www.localhost

# SSL不要（開発環境）
SSL_ENABLED=false

# Nginx Tuning（軽量）
NGINX_WORKER_PROCESSES=1
NGINX_WORKER_CONNECTIONS=512
NGINX_CLIENT_MAX_BODY_SIZE=100M

# ----------------------------------------------------------------------------
# Monitoring Configuration
# ----------------------------------------------------------------------------

# Grafana Settings（開発用）
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin123
GF_SECURITY_SECRET_KEY=dev_grafana_secret_key

GF_SERVER_PROTOCOL=http
GF_SERVER_DOMAIN=localhost
GF_SERVER_ROOT_URL=http://localhost:3001

GF_AUTH_ANONYMOUS_ENABLED=true  # 開発では匿名アクセスOK
GF_AUTH_DISABLE_LOGIN_FORM=false

# Prometheus Settings
PROMETHEUS_RETENTION_TIME=7d  # 開発では短く
PROMETHEUS_STORAGE_TSDB_PATH=/prometheus

# Alertmanager Settings（開発では無効化）
ALERTMANAGER_ENABLED=false

# ----------------------------------------------------------------------------
# Backup Configuration
# ----------------------------------------------------------------------------

# Backup Directory（ローカル）
BACKUP_DIR=./backups
BACKUP_RETENTION_DAYS=7  # 開発では短く

# Offsite Backup（開発では不要）
OFFSITE_BACKUP_ENABLED=false

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------

# Development - セキュリティ設定は緩く
FAIL2BAN_ENABLED=false
UFW_ENABLED=false

# Security Scan（開発では手動実行）
SECURITY_SCAN_ENABLED=false

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------

# Enable/Disable Features（開発用）
FEATURE_TELEGRAM_NOTIFICATIONS=false  # 開発では煩わしいのでオフ
FEATURE_EMAIL_NOTIFICATIONS=false
FEATURE_SLACK_NOTIFICATIONS=false
FEATURE_AUTO_BACKUP=false  # 手動バックアップ
FEATURE_METRICS_COLLECTION=true

# ----------------------------------------------------------------------------
# Rate Limiting & Throttling
# ----------------------------------------------------------------------------

# 開発環境ではレート制限を緩く
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

THROTTLE_ENABLED=false

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------

# Log Settings（開発では読みやすく）
LOG_FORMAT=pretty  # JSONではなくprettyフォーマット
LOG_TIMESTAMP_FORMAT=HH:mm:ss

# Log Rotation（開発では不要）
LOG_ROTATION_ENABLED=false

# コンソール出力を有効化
LOG_TO_CONSOLE=true
LOG_TO_FILE=true

# ----------------------------------------------------------------------------
# Cache Configuration
# ----------------------------------------------------------------------------

# Redis Settings（開発環境でも使える）
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=dev_redis_password
REDIS_DB=0
CACHE_TTL=600  # 10分（短め）

# ----------------------------------------------------------------------------
# Email Configuration
# ----------------------------------------------------------------------------

# MailHog for Email Testing
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=dev@localhost

# MailHog UI: http://localhost:8025

# ----------------------------------------------------------------------------
# Development Tools
# ----------------------------------------------------------------------------

# Debug Settings
DEBUG=true
VERBOSE=true
TRACE_ERRORS=true

# Stack Trace
SHOW_STACK_TRACE=true
ERROR_STACK_TRACE_LIMIT=50

# Development Tools Access
ADMINER_ENABLED=true  # http://localhost:8088
PGADMIN_ENABLED=true  # http://localhost:5050
MAILHOG_ENABLED=true  # http://localhost:8025

# pgAdmin Settings
PGADMIN_DEFAULT_EMAIL=admin@localhost
PGADMIN_DEFAULT_PASSWORD=admin123

# Source Maps
SOURCE_MAPS=true

# Hot Module Replacement
HMR_ENABLED=true

# ----------------------------------------------------------------------------
# Testing Configuration
# ----------------------------------------------------------------------------

# Test Database
TEST_DATABASE_URL=postgresql://openclaw_dev:dev_password_123@postgres:5432/openclaw_test

# Test Settings
TEST_TIMEOUT=30000
TEST_COVERAGE_THRESHOLD=80

# ----------------------------------------------------------------------------
# Mock Services（オプション）
# ----------------------------------------------------------------------------

# API Mocking
MOCK_ANTHROPIC_API=false  # trueにするとモックレスポンス
MOCK_TELEGRAM_API=false

# Mock Response Delay
MOCK_API_DELAY_MS=100

# ----------------------------------------------------------------------------
# Performance Profiling
# ----------------------------------------------------------------------------

# Profiling Tools
ENABLE_PROFILER=true
ENABLE_MEMORY_PROFILER=true

# Performance Monitoring
SLOW_QUERY_THRESHOLD_MS=1000
SLOW_REQUEST_THRESHOLD_MS=5000

# ----------------------------------------------------------------------------
# Custom Application Settings
# ----------------------------------------------------------------------------

# Seed Data（開発環境で自動投入）
AUTO_SEED_DATA=true
SEED_SAMPLE_USERS=true
SEED_SAMPLE_WORKFLOWS=true

# ----------------------------------------------------------------------------
# Docker Compose Override
# ----------------------------------------------------------------------------

# docker-compose.override.yml を使用する場合の設定
# 詳細は docker-compose.override.yml.example を参照

# Debugger Port
NODE_INSPECT_PORT=9229

# Volume Mounts（ホットリロード用）
MOUNT_LOCAL_CODE=true

# ============================================================================
# 開発環境チェックリスト
# ============================================================================
#
# 開発開始前に確認:
# [ ] .env ファイルが作成されている
# [ ] APIキーが設定されている（開発用）
# [ ] ポートが競合していない
# [ ] Docker Composeが起動する
# [ ] ホットリロードが動作する
# [ ] デバッグポートにアクセスできる
#
# 便利なコマンド:
# - make dev: 開発環境起動
# - make logs: ログ確認
# - make shell: コンテナ内シェル
# - make seed: サンプルデータ投入
#
# ============================================================================
