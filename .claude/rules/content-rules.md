# コンテンツルール — 唯一の正（Single Source of Truth）

> **このファイルが全ルールの原本。他のドキュメントはここを参照するだけ。**
> 矛盾が見つかったら → このファイルが正しい。他を直す。
> CLAUDE.mdの `@.claude/rules/content-rules.md` で毎セッション自動読み込み。

---

## 1. Xハッシュタグルール（コードで強制済み）

### 必須タグ（x-auto-post.py が物理的に追加）

```python
# scripts/x-auto-post.py:21
# scripts/x_quote_repost.py:43
MANDATORY_HASHTAGS = ["#Nowpattern", "#ニュース分析"]
```

| 種類 | タグ | 必須/任意 | 強制方法 |
|------|------|----------|---------|
| ブランド | `#Nowpattern` | **必須** | コードが自動追加 |
| カテゴリ | `#ニュース分析`（JP） / `#NewsAnalysis`（EN） | **必須** | コードが自動追加 |
| 固有名詞 | 記事に登場する人名/企業名（#Apple #DeepSeek等） | **必須 1〜2個** | NEOが選ぶ |
| 合計 | 3〜4個 | | |

### 禁止

- ❌ 内部タクソノミータグ（`#後発逆転` `#プラットフォーム支配` 等）→ Ghost専用
- ❌ 数字タグ（`#17%下落` 等）→ 誰も検索しない。数字は本文に書く
- ❌ 5個以上のハッシュタグ → アルゴリズムがペナルティ

### 例

```
日本語記事: #Nowpattern #ニュース分析 #Apple #Siri
英語記事:   #Nowpattern #NewsAnalysis #Apple #Siri
```

---

## 2. Ghost記事タグルール（コードで強制済み）

### 固定タグ（全記事に自動付与）

| タグ | slug | 用途 |
|------|------|------|
| `nowpattern` | `nowpattern` | ブランド |
| `deep-pattern` | `deep-pattern` | フォーマット |
| `日本語` / `English` | `lang-ja` / `lang-en` | 言語 |

### 3層タクソノミー（taxonomy.json が唯一の定義）

```
ファイル: scripts/nowpattern_taxonomy.json
強制: scripts/article_validator.py（Layer 1）
    + scripts/nowpattern_publisher.py（Layer 2）
```

| レイヤー | 個数 | 1記事あたり | 強制方法 |
|----------|------|-------------|---------|
| **ジャンル** | 13 | 1〜2個 | article_validator.py が検証 |
| **イベント** | 19 | 1〜2個 | article_validator.py が検証 |
| **力学** | 16 | 1〜3個 | article_validator.py が検証 |

リスト外のタグ → article_validator.py が exit(1) でブロック → Telegram通知

---

## 3. 記事フォーマット（Deep Pattern一択）

### 全12セクション + 有料/無料の線引き

```
★ 無料ゾーン（Phase 1は全文無料、Phase 2以降も無料のまま）
  0. FAST READ        — 1分サマリー、逆説フック
  1. BOTTOM LINE      — 3秒で核心
  2. DELTA            — 前回からの変化
  3. タグバッジ        — ジャンル/イベント/力学
  4. Why it matters   — なぜ重要か
  5. What happened    — 事実リスト

────────── ★ 有料の壁（Phase 2、$9.99/月） ──────────

★ 有料ゾーン（Phase 2以降）
  6. The Big Picture   — 歴史的文脈 + 利害関係者マップ
  7. Between the Lines — 報道が言わないこと
  8. NOW PATTERN       — 力学分析 × 2 + 交差点
  9. Pattern History   — 過去の並行事例 × 2
  10. What's Next      — 3シナリオ + トリガー
  11. OPEN LOOP        — 次のトリガー + 追跡テーマ
```

**Phase 1（月1〜3）= 全文無料。Phase 2（月4〜）で有料化。**

---

## 4. X投稿ルール

### 5フォーマット × 3コンテンツパターン

**フォーマット:**

| 種類 | 件数/日 |
|------|---------|
| 引用リポスト | 80件 |
| 画像+オリジナル | 10件 |
| X Article | 1件 |
| スレッド | 1件 |
| リプライ（賛同のみ） | 8件 |
| **合計** | **100件** |

**コンテンツパターン:**

| パターン | 使うとき |
|----------|---------|
| P1 好奇心ギャップ型 | 新規トピック（デフォルト） |
| P2 差分提示型 | 前回記事あり、確率が変わった |
| P3 損失回避型 | 投資/行動判断直結 |

### ボット対策

- ランダム間隔 8〜20分
- 深夜投稿禁止（22:00-08:00）
- 5フォーマット混在
- リプライは賛同のみ（議論禁止、0件の日もOK）

---

## 5. 配信ルール

| 配信先 | 件数/日 | 備考 |
|--------|---------|------|
| **Ghost** | **200本**（JP100+EN100） | JP書いたら自動翻訳でEN。翻訳はOpus 4.6（Max内） |
| **X** | **100投稿** | 拡声器 |
| **note** | **3〜5本** | シャドバン対策、投稿間隔4時間以上 |
| **Substack** | **1〜2本** | メール配信、多すぎると解除される |

---

## 6. 強制の仕組み（5層防御）

```
Layer 0: NEO指示書（プロンプト — 無視される可能性あり）
Layer 1: article_validator.py（コード — Ghost記事タグを物理ブロック）
Layer 2: publisher.py STRICT（コード — 投稿時に二重チェック）
Layer 3: x-auto-post.py MANDATORY_HASHTAGS（コード — Xハッシュタグを自動追加）
Layer 4: 投稿後監査cron（コード — 漏れた場合の安全網）
```

**ドキュメント（プロンプト）は忘れられる。コードは忘れない。**
**全てのルールはコードで強制する。ドキュメントは「なぜそうなっているか」の説明だけ。**

---

## 8. Xアルゴリズム自動監視（コードで強制）

### 仕組み

```
スクリプト: scripts/x-algorithm-monitor.py
cron: 毎朝 09:00 JST（自動実行、忘れようがない）
保存先: /opt/shared/x-analytics/tactics.json
```

| 監視項目 | 方法 | コスト |
|----------|------|--------|
| @nowpatternの投稿パフォーマンス | Grok API検索 | $5クレジット内 |
| 同ジャンルのバズ投稿パターン | Grok API検索 | 同上 |
| Xアルゴリズム変更情報 | RSS（4ブログ監視） | 無料 |

### 出力

1. **tactics.json** — 最新の投稿戦術（x-auto-post.pyが参照）
2. **Telegramレポート** — 毎朝Naotoのスマホに自動送信
3. **history/YYYY-MM-DD.json** — 日次データ蓄積（週次分析用）

### 2026年Xアルゴリズム基本ルール（常時適用）

| ルール | 理由 |
|--------|------|
| リプライ = いいねの150倍の重み | 会話を生む投稿が最優先 |
| テキスト+画像 > ビデオ（30%差） | アルゴリズムがテキスト優遇 |
| 外部リンクは本文に入れない | ペナルティ。リプライに置く |
| ポジティブ/建設的なトーン | Grokがトーン監視、攻撃的=抑制 |
| 投稿後1時間のエンゲージメントが最重要 | 初速で拡散が決まる |
| ベスト時間: 9:00-12:00, 18:00-21:00 JST | 平日のゴールデンタイム |
| X Premium必須 | 無料アカウントはリーチ激減 |

---

## 7. このファイルの参照元

| ファイル | 何を参照しているか |
|----------|-------------------|
| `.claude/FLASH_CARDS.md` | Xハッシュタグルール → ここのセクション1 |
| `docs/PIPELINE_ARCHITECTURE.md` | 全ルール → ここを参照 |
| `docs/NEO_INSTRUCTIONS_V2.md` | タグ/X投稿 → ここのセクション1-4 |
| `docs/AGENT_WISDOM.md` | ハッシュタグ → ここのセクション1 |
| `docs/NOWPATTERN_OPERATIONS_MANUAL.md` | X投稿テンプレ → ここのセクション1,4 |

**矛盾を見つけたら → このファイルが正しい → 他を修正する**

---

*最終更新: 2026-02-23 — ルール統合 + Xアルゴリズム監視追加*
