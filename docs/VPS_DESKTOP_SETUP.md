# VPSデスクトップ環境セットアップ完了

## 📋 インストール済みの内容

### デスクトップ環境
- **OS**: Ubuntu 24.04 LTS
- **デスクトップ環境**: XFCE4（軽量）
- **リモートデスクトップ**: xrdp
- **ブラウザ**: Firefox（インストール済み）
- **メモリ使用量**: 916MB / 1.9GB（空き 1GB以上）

### VPS作業用アカウント
- **ユーザー名**: `neocloop`
- **パスワード**: `AYfnhKtist6M`
- **用途**: VPSデスクトップ専用（暗号資産運用、AI自動化）

---

## 🔐 セキュリティ方針

### ✅ VPSに入れていいもの
- 暗号資産取引所（Binance、Bybit、Coinbase等）
- MetaMask、Trust Wallet等のウォレット
- X (Twitter) 作業用アカウント
- Substack、GitHub（作業用）
- neocloop@gmail.com（VPS専用Googleアカウント）

### ❌ VPSに絶対入れないもの
- 銀行口座（三菱UFJ、楽天銀行等）
- 証券口座（SBI証券、楽天証券等）
- メインのGmail（パスワードリセットリンクが来るやつ）
- Amazon、楽天市場、クレカ管理画面
- 個人のGoogle Drive、Dropbox

---

## 💻 リモートデスクトップ接続方法

### 方法1: SSHトンネル経由（セキュア、おすすめ）

**重要**: Windowsは127.0.0.1:3389への直接接続をブロックするため、**別のローカルポート（13389）を使用**します。

#### Step 1: SSHトンネルを開く

PowerShellまたはコマンドプロンプトで以下を実行:

```powershell
ssh -L 13389:localhost:3389 -N root@163.44.124.123
```

このコマンドは実行したまま（閉じない）。別ウィンドウで次のStepへ。

#### Step 2: リモートデスクトップ接続

1. Windowsスタートメニュー → 「リモートデスクトップ接続」を検索
2. 「コンピューター」に **`127.0.0.1:13389`** と入力（ポート13389を指定）
3. 「接続」をクリック
4. ログイン画面が表示されたら:
   - **Session**: `Xorg`（デフォルトで選択されている）
   - **Username**: `neocloop`
   - **Password**: `pass123`
5. 「OK」をクリック

#### Step 3: XFCEデスクトップが表示される

初回起動時に設定ウィザードが表示される場合:
- 「Use default config」を選択（推奨）

---

### 方法2: ポート開放（非推奨、セキュリティリスク）

現在、ポート3389は外部に開放されていません（安全な状態）。
**推奨: 方法1のSSHトンネル経由でアクセスしてください。**

---

## 🌐 次のステップ

### 1. neocloop@gmail.com の作成

VPSデスクトップのFirefoxで:
1. Firefox起動
2. https://accounts.google.com/signup にアクセス
3. アカウント作成:
   - メールアドレス: `neocloop@gmail.com`
   - パスワード: **強力なパスワード**（VPSパスワードとは別）
   - 電話番号認証: あなたの実際の電話番号でOK（作成後は解除可能）

### 2. Firefoxにログイン

- Firefoxに neocloop@gmail.com でログイン
- **重要**: パスワード保存機能は使わない（手動で管理）

### 3. 暗号資産取引所の設定

- Binance、Bybit等のアカウントをFirefoxでログイン
- APIキーを生成し、N8N/OpenClawで使用

### 4. OpenClawからの操作テスト

- TelegramでJarvisに「Firefoxでgoogle.comを開いて」と指示
- 正常に動作すればデスクトップ環境の準備完了

---

## 🛠️ トラブルシューティング

### リモートデスクトップに接続できない

**症状**: 「localhost に接続できません」

**解決策**:
1. SSHトンネルが開いているか確認（PowerShellウィンドウが閉じていないか）
2. SSHトンネルを再起動:
   ```powershell
   ssh -L 3389:localhost:3389 root@163.44.124.123
   ```

### ログインできない（パスワードエラー）

**症状**: 「認証に失敗しました」

**解決策**:
1. ユーザー名が `neocloop`（小文字）になっているか確認
2. パスワード `AYfnhKtist6M` を正確にコピペ
3. キーボード配置が日本語になっているか確認

### 画面が真っ黒

**症状**: ログイン後、真っ黒な画面のまま

**解決策**:
1. マウスを右クリック → 「Applications」→「Terminal Emulator」
2. ターミナルで `xfce4-panel` と入力してEnter
3. パネルが表示される

---

## 📊 メモリ使用状況

### 現在の状況（2026-02-15）
- **メモリ合計**: 1.9GB
- **使用中**: 916MB（47%）
- **空き**: 1.0GB
- **Swap使用中**: 992MB

### デスクトップ環境使用時の予測
- Firefox起動時: +300MB（合計 1.2GB使用）
- Chrome起動時: +500MB（Firefoxより重い）
- **推奨**: Firefoxを使用（軽量）

### メモリ不足の場合
- N8Nワークフローを一時停止
- または、VPSプランをアップグレード（2GB → 4GB）

---

## 🔒 セキュリティ設定済み

- ✅ ポート3389: 外部非公開（SSHトンネル経由のみ）
- ✅ ユーザー: sudo権限あり（必要時のみ使用）
- ✅ xrdp: SSL/TLS暗号化有効
- ✅ UFW: デフォルト拒否設定維持

---

## 📝 メンテナンス

### 定期的に実行（月1回）

```bash
ssh root@163.44.124.123

# パッケージ更新
apt-get update && apt-get upgrade -y

# ディスク使用状況確認
df -h

# メモリ使用状況確認
free -h
```

---

**作成日**: 2026-02-15
**バージョン**: 1.0
**担当**: Claude Code（ローカル）
